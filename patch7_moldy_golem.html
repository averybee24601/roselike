<!-- PATCH 7 â€” Moldies (normal/elite) and Rock Golem + drops + sprites + Junon spawns -->
<!-- FIND: function spawnMob(type,x,y){ -->
<!-- INSERT INSIDE, after the existing types (jelly/pumpkin/flanae/jellyking): -->
<script>
if(type==='moldy'){ Object.assign(base,{r:20,speed:70,hp:120,hpMax:120,atk:16}); }
if(type==='moldy_elite'){ Object.assign(base,{r:22,speed:80,hp:220,hpMax:220,atk:24}); }
if(type==='rockgolem'){ Object.assign(base,{r:26,speed:60,hp:420,hpMax:420,atk:30, golem:true}); }
</script>

<!-- FIND: function dropItemRoll(m){ -->
<!-- INSERT BEFORE the closing brace of dropItemRoll: -->
<script>
if(m.type==='moldy'){ if(Math.random()<0.22) rolls.push('potion_hp'); if(Math.random()<0.08) rolls.push('wood_sword'); if(Math.random()<0.06) rolls.push('wood_katar'); }
if(m.type==='moldy_elite'){ if(Math.random()<0.25) rolls.push('potion_hp'); if(Math.random()<0.10) rolls.push('wood_staff'); if(Math.random()<0.10) rolls.push('wood_bow'); if(Math.random()<0.08) rolls.push('runner_shoes'); }
if(m.type==='rockgolem'){ if(Math.random()<0.35) rolls.push('potion_hp'); if(Math.random()<0.15) rolls.push('leather_armor'); if(Math.random()<0.12) rolls.push('royal_core'); }
</script>

<!-- FIND: function drawMobSprite(m){ -->
<!-- INSERT additional cases before the function's closing brace: -->
<script>
else if(m.type==='moldy'){
  const s=worldToScreen(m.x,m.y);
  const g=ctx.createLinearGradient(0, s.y-m.r, 0, s.y+m.r); g.addColorStop(0,'#8dcf6a'); g.addColorStop(1,'#537a3d');
  ctx.fillStyle=g; ctx.beginPath(); ctx.ellipse(s.x, s.y+4, m.r, m.r-4, 0, 0, Math.PI*2); ctx.fill();
}
else if(m.type==='moldy_elite'){
  const s=worldToScreen(m.x,m.y);
  const g=ctx.createLinearGradient(0, s.y-m.r, 0, s.y+m.r); g.addColorStop(0,'#79bf58'); g.addColorStop(1,'#3e6a2a');
  ctx.fillStyle=g; ctx.beginPath(); ctx.ellipse(s.x, s.y+3, m.r+2, m.r-2, 0, 0, Math.PI*2); ctx.fill();
}
else if(m.type==='rockgolem'){
  const s=worldToScreen(m.x,m.y);
  ctx.fillStyle='#5b676f'; ctx.fillRect(s.x-m.r+2, s.y-m.r+6, (m.r*2)-4, (m.r*2)-10);
  ctx.fillStyle='#2a3238'; ctx.fillRect(s.x-6, s.y-4, 12, 8);
}
</script>

<!-- FIND: function genJunon(){ (added by Patch 5) -->
<!-- INSERT NEAR THE END, after NPC placement, to spawn Junon mobs: -->
<script>
const spawnOut=(t,count)=>{let n=0,tries=0;while(n<count&&tries<1200){tries++;const x=(Math.random()*MAP_W)|0,y=(Math.random()*MAP_H)|0;const tt=tiles[y*MAP_W+x];if(tt===0||tt===1){spawnMob(t,x*TILE+TILE/2,y*TILE+TILE/2);n++;}}};
spawnOut('moldy',60); spawnOut('moldy_elite',20); spawnOut('rockgolem',8);
</script>
