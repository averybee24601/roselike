<!-- PATCH 8 â€” Graphics touch-ups (optional, keeps your style) -->
<!-- FIND: // Tiles (in draw()) -->
<!-- REPLACE the per-tile drawing body with this more readable shading: -->
<script>
if(t===0){ // grass
  const g = ctx.createLinearGradient(0, py, 0, py+TILE);
  g.addColorStop(0, '#174a2a'); g.addColorStop(1, '#10311f');
  ctx.fillStyle = g; ctx.fillRect(px,py,TILE,TILE);
  ctx.fillStyle = 'rgba(255,255,255,0.03)';
  for(let i=0;i<3;i++){ ctx.fillRect(px+4+i*16, py+2, 6, TILE-4); }
}else if(t===1){ // dirt
  ctx.fillStyle = '#6d5a35'; ctx.fillRect(px,py,TILE,TILE);
  ctx.strokeStyle = 'rgba(0,0,0,0.25)'; ctx.lineWidth=1; ctx.strokeRect(px+0.5,py+0.5,TILE-1,TILE-1);
  ctx.fillStyle='rgba(255,255,255,0.04)'; ctx.fillRect(px+3,py+3,TILE-6,TILE-6);
}else{ // water
  const g = ctx.createLinearGradient(0, py, 0, py+TILE);
  g.addColorStop(0, '#2e7da3'); g.addColorStop(1, '#1f5a74');
  ctx.fillStyle = g; ctx.fillRect(px,py,TILE,TILE);
  ctx.fillStyle = 'rgba(255,255,255,0.08)';
  const w = 8, amp=2, y0 = py + (TILE*0.3);
  for(let xx=px; xx<px+TILE; xx+=w){
    const yy = y0 + Math.sin((xx*0.2) + performance.now()/500)*amp;
    ctx.fillRect(xx, Math.round(yy), w-2, 2);
  }
}
</script>

<!-- FIND: function drawPlayer(){ -->
<!-- REPLACE whole function with a slightly more readable sprite (colors vary by job): -->
<script>
function drawPlayer(){
  const s = worldToScreen(player.x, player.y);
  ctx.fillStyle = 'rgba(0,0,0,0.35)'; ctx.beginPath(); ctx.ellipse(s.x, s.y+16, 18, 8, 0, 0, Math.PI*2); ctx.fill();
  ctx.save(); ctx.translate(s.x, s.y); ctx.rotate(player.dir);

  const bodyCol = player.job==='Soldier' ? '#3b5f9d' : player.job==='Hawker' ? '#2f8a57' :
                  player.job==='Dealer' ? '#8a6b3a' : player.job==='Muse' ? '#7a3ca3' : '#2a6aa8';
  const g = ctx.createLinearGradient(0,-14,0,14); g.addColorStop(0, bodyCol); g.addColorStop(1,'#1b2535');
  ctx.fillStyle = g; ctx.fillRect(-10,-14,20,28); ctx.strokeStyle='rgba(0,0,0,0.6)'; ctx.lineWidth=1; ctx.strokeRect(-10,-14,20,28);

  ctx.fillStyle = '#f2d6c2'; ctx.beginPath(); ctx.arc(0,-24,8,0,Math.PI*2); ctx.fill();
  ctx.strokeStyle='rgba(0,0,0,0.6)'; ctx.lineWidth=1; ctx.beginPath(); ctx.arc(0,-24,8,0,Math.PI*2); ctx.stroke();
  ctx.fillStyle = '#3b2a1f'; ctx.beginPath(); ctx.arc(-1,-27,6,0,Math.PI*2); ctx.fill();
  ctx.fillStyle = '#1a2230'; ctx.fillRect(-3,-23,2,2); ctx.fillRect(1,-23,2,2);

  ctx.fillStyle = '#f2d6c2'; ctx.fillRect(10,-10,10,6); ctx.fillRect(-20,-10,10,6);
  ctx.fillStyle = '#2a3342'; ctx.fillRect(-10,10,8,10); ctx.fillRect(2,10,8,10);

  const wep = (player.eq.weapon && ITEM_DB[player.eq.weapon]?.wep) || 'fist';
  ctx.fillStyle='#d9d9d9';
  if(wep==='sword'){ ctx.fillRect(12,-12,4,24); ctx.fillRect(8,-10,12,4); }
  else if(wep==='bow'){ ctx.strokeStyle='#d9e8a8'; ctx.lineWidth=3; ctx.beginPath(); ctx.moveTo(16,-16); ctx.quadraticCurveTo(30,0,16,16); ctx.stroke(); }
  else if(wep==='katar'){ ctx.fillRect(12,-6,14,4); ctx.fillRect(12,2,14,4); }
  else if(wep==='staff'){ ctx.fillStyle='#b98f5a'; ctx.fillRect(8,-22,6,40); ctx.fillStyle='#8ee'; ctx.beginPath(); ctx.arc(11,-24,6,0,Math.PI*2); ctx.fill(); }
  else if(wep==='wand'){ ctx.fillStyle='#b98f5a'; ctx.fillRect(12,-10,6,22); ctx.fillStyle='#f6f'; ctx.beginPath(); ctx.arc(15,-12,4,0,Math.PI*2); ctx.fill(); }

  ctx.restore();
}
</script>
